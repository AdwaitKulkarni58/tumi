<main class="mt-6">
  <section class="mx-auto max-w-7xl px-4 sm:px-6">
    <div class="-mt-2 mb-4 flex items-center">
      <a routerLink=".." class="text-">Admin</a>
      <mat-icon svgIcon="icon-forward" style="width: 1rem"></mat-icon>
      <span>Invites</span>
    </div>
    <h1
      class="text-4xl font-extrabold tracking-tight text-slate-900 dark:text-slate-100 sm:text-5xl md:text-6xl"
    >
      Invites
    </h1>
    <a routerLink="create" mat-flat-button class="my-2">Create invites</a>
    <div class="mt-4 overflow-x-auto">
      <table class="min-w-full divide-y-2 text-sm">
        <thead>
          <tr>
            <th class="whitespace-nowrap px-4 py-2 text-left font-medium">
              Email
            </th>
            <th class="whitespace-nowrap px-4 py-2 text-left font-medium">
              Creator
            </th>
            <th class="whitespace-nowrap px-4 py-2 text-left font-medium">
              Status
            </th>
            <th class="whitespace-nowrap px-4 py-2 text-left font-medium">
              Redeemer
            </th>
            <th class="whitespace-nowrap px-4 py-2 text-left font-medium">
              Redeemed at
            </th>
            <th></th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-200">
          <tr *ngFor="let invite of invites$ | async">
            <td class="whitespace-nowrap px-4 py-2 font-medium">
              {{ invite.email }}
            </td>
            <td class="whitespace-nowrap px-4 py-2">
              {{ invite.creator.fullName }}
            </td>
            <td class="whitespace-nowrap px-4 py-2">{{ invite.status }}</td>
            <td class="whitespace-nowrap px-4 py-2">
              {{ invite.redeemedBy?.fullName ?? 'not redeemed' }}
            </td>
            <td class="whitespace-nowrap px-4 py-2">
              {{ invite.redeemedAt | date: 'short' }}
            </td>
            <td class="whitespace-nowrap px-4 py-2">
              <button
                mat-stroked-button
                cdkCopyToClipboard="https://beta.esn.world/invite/{{
                  invite.id
                }}"
              >
                Copy invite link
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</main>
